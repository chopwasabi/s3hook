// Unofficial AWS SDK for the Browser - v0.1.0 - https://github.com/jpillora/aws-sdk-browser
// Jaime Pillora <dev@jpillora.com> - MIT Copyright 2013
!function(a,b){!function(){var c="undefined"!=typeof a?a:exports,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e=function(){try{b.createElement("$")}catch(a){return a}}();c.btoa||(c.btoa=function(a){for(var b,c,f=0,g=d,h="";a.charAt(0|f)||(g="=",f%1);h+=g.charAt(63&b>>8-8*(f%1))){if(c=a.charCodeAt(f+=.75),c>255)throw e;b=b<<8|c}return h}),c.atob||(c.atob=function(a){if(a=a.replace(/=+$/,""),1==a.length%4)throw e;for(var b,c,f=0,g=0,h="";c=a.charAt(g++);~c&&(b=f%4?64*b+c:c,f++%4)?h+=String.fromCharCode(255&b>>(6&-2*f)):0)c=d.indexOf(c);return h})}();var c=c||function(a,b){var c={},d=c.lib={},e=function(){},f=d.Base={extend:function(a){e.prototype=this;var b=new e;return a&&b.mixIn(a),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},g=d.WordArray=f.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||i).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;if(a=a.sigBytes,this.clamp(),d%4)for(var e=0;a>e;e++)b[d+e>>>2]|=(255&c[e>>>2]>>>24-8*(e%4))<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;a>e;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(0|4294967296*a.random());return new g.init(c,b)}}),h=c.enc={},i=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++){var e=255&b[d>>>2]>>>24-8*(d%4);c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new g.init(c,b/2)}},j=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++)c.push(String.fromCharCode(255&b[d>>>2]>>>24-8*(d%4)));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return new g.init(c,b)}},k=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(j.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return j.parse(unescape(encodeURIComponent(a)))}},l=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=k.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,h=e/(4*f),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0);if(b=h*f,e=a.min(4*b,e),b){for(var i=0;b>i;i+=f)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return new g.init(i,e)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=l.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}});var m=c.algo={};return c}(Math);!function(){var a=c,b=a.lib,d=b.WordArray,e=b.Hasher,f=[],b=a.algo.SHA1=e.extend({_doReset:function(){this._hash=new d.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],g=c[2],h=c[3],i=c[4],j=0;80>j;j++){if(16>j)f[j]=0|a[b+j];else{var k=f[j-3]^f[j-8]^f[j-14]^f[j-16];f[j]=k<<1|k>>>31}k=(d<<5|d>>>27)+i+f[j],k=20>j?k+((e&g|~e&h)+1518500249):40>j?k+((e^g^h)+1859775393):60>j?k+((e&g|e&h|g&h)-1894007588):k+((e^g^h)-899497514),i=h,h=g,g=e<<30|e>>>2,e=d,d=k}c[0]=0|c[0]+d,c[1]=0|c[1]+e,c[2]=0|c[2]+g,c[3]=0|c[3]+h,c[4]=0|c[4]+i},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;return b[d>>>5]|=128<<24-d%32,b[(d+64>>>9<<4)+14]=Math.floor(c/4294967296),b[(d+64>>>9<<4)+15]=c,a.sigBytes=4*b.length,this._process(),this._hash},clone:function(){var a=e.clone.call(this);return a._hash=this._hash.clone(),a}});a.SHA1=e._createHelper(b),a.HmacSHA1=e._createHmacHelper(b)}(),function(){var a=c,b=a.enc.Utf8;a.algo.HMAC=a.lib.Base.extend({init:function(a,c){a=this._hasher=new a.init,"string"==typeof c&&(c=b.parse(c));var d=a.blockSize,e=4*d;c.sigBytes>e&&(c=a.finalize(c)),c.clamp();for(var f=this._oKey=c.clone(),g=this._iKey=c.clone(),h=f.words,i=g.words,j=0;d>j;j++)h[j]^=1549556828,i[j]^=909522486;f.sigBytes=g.sigBytes=e,this.reset()},reset:function(){var a=this._hasher;a.reset(),a.update(this._iKey)},update:function(a){return this._hasher.update(a),this},finalize:function(a){var b=this._hasher;return a=b.finalize(a),b.reset(),b.finalize(this._oKey.clone().concat(a))}})}(),function(a,b){!function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o=[].slice;e=["open","setRequestHeader","send","abort","getAllResponseHeaders","getResponseHeader","overrideMimeType"],d=["onreadystatechange","onprogress","onloadstart","onloadend","onload","onerror","onabort"],f=["readyState","responseText","withCredentials","statusText","status","response","responseType","responseXML","upload"],g=f[0],h=f[1],i=f[2],k=function(a){var b;return b=function(){},b.prototype=a,new b},n=function(a){return n.s.push(a)},n.s=[],j=function(a,b){var c,d,e,f,g,h;switch(null==b&&(b={}),typeof a){case"object":d=[];for(e in a)f=a[e],d.push(""+e+":	"+f);return d.join("\n");case"string":for(d=a.split("\n"),g=0,h=d.length;h>g;g++)c=d[g],/([^:]+):\s*(.+)/.test(c)&&(b[RegExp.$1]||(b[RegExp.$1]=RegExp.$2));return b}},n.headers=j,n.PROPS=f,l=function(b){var c;return(c=a[b])?a[b]=function(a){return"string"!=typeof a||/\.XMLHTTP/.test(a)?m(new c(a),c):void 0}:void 0},l("ActiveXObject"),l("XMLHttpRequest"),m=function(b){var h,l,m,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L;if(0===n.s.length)return b;for(r=!1,D={},C={},C[i]=!1,s={},t={},m={},l=function(a){var c,d,e;c={};for(d in a)e=a[d],c[d]=e===b?C:e;return c},w=k(m),B={},w.set=function(a,c){var d;if(r=!0,B[a]=1,a===g){for(d=[];C[g]<c;)C[g]++,C[g]!==b[g]&&(w.trigger("readystatechange"),1===C[g]&&w.trigger("loadstart"),4===C[g]?(w.trigger("load"),d.push(w.trigger("loadend"))):d.push(void 0));return d}return C[a]=c},z=k(s),w.setRequestHeader=function(a,c){return r=!0,z[a]=c,m.opened?b.setRequestHeader(a,c):void 0},A=k(t),w.setResponseHeader=function(a,b){return r=!0,A[a]=b},y={},x={},w.onChange=function(a,b){return r=!0,(y[a]=y[a]||[]).push(b)},w.onCall=function(a,b){return r=!0,(x[a]=x[a]||[]).push(b)},w.trigger=function(a,b){var c;return null==b&&(b={}),a=a.replace(/^on/,""),b.type=a,null!=(c=C["on"+a])?c.call(C,b):void 0},w.serialize=function(){var a,b,c,d,e,g,h,i;for(c={},h=0,i=f.length;i>h;h++)b=f[h],c[b]=C[b];e={};for(a in A)g=A[a],e[a]=g;d={};for(a in z)g=z[a],d[a]=g;return{method:m.method,url:m.url,async:m.async,body:m.body,responseHeaders:e,requestHeaders:d,props:c}},w.deserialize=function(a){var b,c,d,e,f,g,h,i,j,k;for(h=["method","url","async","body"],f=0,g=h.length;g>f;f++)c=h[f],a[c]&&(w[c]=a[c]);i=a.responseHeaders||{};for(b in i)e=i[b],w.setResponseHeader(b,e);j=a.requestHeaders||{};for(b in j)e=j[b],w.setRequestHeader(b,e);k=a.props||{};for(d in k)e=k[d],w.set(d,e)},F=0,I=e.length;I>F;F++)q=e[F],b[q]&&function(a){return C[a]=function(){var d,e,f,g,h,i,k;switch(d=1<=arguments.length?o.call(arguments,0):[],m.opened=!m.opened&&"open"===a,m.sent=!m.sent&&"send"===a,a){case"getAllResponseHeaders":return j(A);case"send":m.body=d[0];break;case"open":m.method=d[0],m.url=d[1],m.async=d[2]}for(g=d,f=x[a]||[],i=0,k=f.length;k>i;i++){if(e=f[i],h=e(d),h===!1)return;h&&(g=h)}return"setRequestHeader"!==a||(s[g[0]]=g[1],z[d[0]]===c)?b[a]?b[a].apply(b,g):void 0:void 0}}(q);for(u=function(){var a,c,d,e,g;try{for(g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(v(c,b[c]));return g}catch(h){if(a=h,"TypeError"===a.constructor.name)throw a}},v=function(a,d){var e,f,h,i,k,l,n,o,p;if(k=D[a],d!==k){if(D[a]=d,a===g){if(1===d)for(h in z)n=z[h],b.setRequestHeader(h,n);2===d&&(m.statusCode=b.status,j(b.getAllResponseHeaders(),t))}for(f=y[a]||[],o=0,p=f.length;p>o;o++)e=f[o],l=e(d,k),l!==c&&(i=l);if(!B[a])return C[a]=i===c?d:i}},E=function(c){return b[c]=function(b){var d;return u(),b&&(d=l(b)),(a.E=a.E||[]).push(d),C[c]?C[c].call(C,d):void 0}},G=0,J=d.length;J>G;G++)p=d[G],E(p);for(u(),L=n.s,H=0,K=L.length;K>H;H++)h=L[H],h.call(null,w);return r?C:b},a.xhook=n}(a,b);var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;for(e=location.protocol+"//"+location.host,s=function(a){return a="xdomain ("+e+"): "+a,console.warn?console.warn(a):alert(a)},x=["postMessage","JSON"],t=0,v=x.length;v>t;t++)if(f=x[t],!a[f])return s("requires '"+f+"' and this browser does not support it"),void 0;for(d="XPING",h=function(){return(Math.random()*Math.pow(2,32)).toString(16)},l=function(a){return/(https?:\/\/[^\/]+)(\/.*)?/.test(a)?{origin:RegExp.$1,path:RegExp.$2}:null},r=function(a){var b;return a instanceof RegExp?a:(b=a.toString().replace(/\W/g,function(a){return"\\"+a}).replace(/\\\*/g,".+"),new RegExp("^"+b+"$"))},j=function(c){return b.addEventListener?a.addEventListener("message",c):a.attachEvent("onmessage",c)},n=function(a){return JSON.stringify(a)},g=function(a){return JSON.parse(a)},p=function(b){return j(function(a){var c,d,e,f,h,i,j,k,m,o,p,q,t;i=a.origin,k=null;for(e in b){o=b[e];try{if(f=r(e),f.test(i)){k=r(o);break}}catch(u){}}if(!k)return s("blocked request from: '"+i+"'"),void 0;if(c=a.source,h=g(a.data),p=h.req,j=l(p.url),!j||!k.test(j.path))return s("blocked request to path: '"+j.path+"' by regex: "+o),void 0;m=new XMLHttpRequest,m.open(p.method,p.url),m.onreadystatechange=function(){var a,b,d,e;if(4===m.readyState){for(b={props:{}},e=xhook.PROPS,d=e.length-1;d>=0;d+=-1)j=e[d],"responseXML"!==j&&(b.props[j]=m[j]);return b.responseHeaders=xhook.headers(m.getAllResponseHeaders()),a=n({id:h.id,res:b}),c.postMessage(a,i)}},t=p.requestHeaders;for(d in t)q=t[d],m.setRequestHeader(d,q);return m.send()}),a===a.parent?s("slaves must be in an iframe"):a.parent.postMessage(d,"*")},o=function(a){return j(function(a){var b;return null!=(b=c.prototype.frames[a.origin])?b.recieve(a):void 0}),xhook(function(b){return b.onCall("open",function(c){var d;return d=l(c[1]),d&&a[d.origin]?(c[2]===!1&&s("sync not supported"),setTimeout(function(){return b.set("readyState",1)}),!1):void 0}),b.onCall("send",function(){var d,e;return e=l(b.url),e&&a[e.origin]?(d=new c(e.origin,a[e.origin]),d.send(b.serialize(),function(a){return b.deserialize(a)}),!1):void 0})})},c=function(){function a(a,c){return this.origin=a,this.proxyPath=c,this.frames[this.origin]?this.frames[this.origin]:(this.frames[this.origin]=this,this.listeners={},this.frame=b.createElement("iframe"),this.frame.id=this.frame.name="xdomain-"+h(),this.frame.src=this.origin+this.proxyPath,this.frame.setAttribute("style","display:none;"),b.body.appendChild(this.frame),this.waits=0,this.ready=!1,void 0)}return a.prototype.frames={},a.prototype.post=function(a){return this.frame.contentWindow.postMessage(a,this.origin)},a.prototype.listen=function(a,b){if(this.listeners[a])throw"already listening for: "+a;return this.listeners[a]=b},a.prototype.unlisten=function(a){return delete this.listeners[a]},a.prototype.recieve=function(a){var b,c;return a.data===d?(this.ready=!0,void 0):(c=g(a.data),(b=this.listeners[c.id])?(this.unlisten(c.id),b(c.res)):(s("unkown message ("+c.id+")"),void 0))},a.prototype.send=function(a,b){var c=this;return this.readyCheck(function(){var d;return d=h(),c.listen(d,function(a){return b(a)}),c.post(n({id:d,req:a}))})},a.prototype.readyCheck=function(a){var b=this;if(this.ready===!0)return a();if(this.waits++>=100)throw"Timeout connecting to iframe: "+this.origin;return setTimeout(function(){return b.readyCheck(a)},100)},a}(),a.xdomain=function(a){return a?(a.masters&&p(a.masters),a.slaves?o(a.slaves):void 0):void 0},xdomain.origin=e,y=b.getElementsByTagName("script"),u=0,w=y.length;w>u;u++)if(m=y[u],/xdomain/.test(m.src)){if(m.hasAttribute("slave")){if(k=l(m.getAttribute("slave")),!k)return;q={},q[k.origin]=k.path,xdomain({slaves:q})}m.hasAttribute("master")&&(i={},i[m.getAttribute("master")]=/./,xdomain({masters:i}))}}(a,b);var d,e,f,g,h,i;d="accessKeyId",g="secretAccessKey",xdomain({slaves:{"https://s3-ap-southeast-2.amazonaws.com":"/jpillora-aus/proxy.html"}}),a.CryptoJS=c,e=a.AWS={config:{update:function(a){var b,c,d;d=[];for(b in a)c=a[b],d.push(this[b]=c);return d}}},i="https://s3-ap-southeast-2.amazonaws.com/jpillora-aus/",f=function(){function a(){}return a.prototype.getObject=function(a,b){return h({method:"GET",url:""+i+a},b)},a.prototype.putObject=function(a,b,c){return h({method:"PUT",url:""+i+a,data:b},c)},a}(),e.S3=f,h=a.ajax=function(b,f){var h,i,j,k,l;return j="GET\n\n\nTue, 27 Mar 2007 19:36:42 +0000\n/johnsmith/photos/puppy.jpg",k=a.btoa(c.HmacSHA1(j,e.config[g])),h="AWS "+e.config[d]+":"+k,console.log("Authorization: "+h),console.log("Authorization: AWS AKIAIOSFODNN7EXAMPLE:bWq2s1WEIj+Ydj0vQ697zp+IXMU="),l=new XMLHttpRequest,l.open(b.method||"GET",b.url||""),l.onreadystatechange=function(){return 4===l.readyState?i():void 0},i=function(){return f({status:l.status,responseText:l.responseText})},l.send(b.data)}}(window,document);